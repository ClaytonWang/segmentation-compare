{% extends "layout.html" %}

{% block title %}Marklogic {% endblock %}

{% block page_content %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Add QueryPlan</h3>
    </div>
    <div class="panel-body">
        <form method="POST" action="{{ url_for('.queryplan_crud') }}" enctype = "multipart/form-data" class="form-horizontal">
            <div class="form-group">
                <label for="nameInput" class="control-label col-sm-2">QueryPlan Name</label>
                <div class="col-sm-4">
                    <input id="nameInput" name="nameInput" type="input" class="form-control" placeholder="Please enter QueryPlan name." />
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">TLCT</label>
                <div class="col-sm-4">
                    <select id="hlctType" name="hlctType" class="col-sm-2 form-control">
                        <option selected="true" value="analytical-materials-au">analytical-materials-au</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">PhraseList Name</label>
                <div class="col-sm-4">
                    <select id="phraselistname" name="phraselistname" class="col-sm-2 form-control">
                        {% for name in phraselistnames %}
                            <option value="{{ name }}">{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label class="col-sm-2 control-label">Operation</label>
                <div class="col-sm-4">
                    <select id="crudType" name="crudType" class="col-sm-2 form-control">
                        <option selected="true" value="1">Insert</option>
                        <option value="2">Delete</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                    <label class="col-sm-2 control-label">Environment</label>
                    <div class="col-sm-4">
                        <select id="envType" name="envType" class="col-sm-2 form-control">
                            <option selected="true" value="1">Dev </option>
                            <option value="2">Cert</option>
                        </select>
                    </div>
            </div>
            <br>
            <div class="form-group">
                    <label class="col-sm-2 control-label"></label>
                    <div class="col-sm-4">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
            </div>
        </form>
        <div class="row">
            <div class="panel-body">
                <h3>Add QueryPlan History</h3>
                 <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>QueryPlan Name</th>
                            <th>HLCT</th>
                            <th>PhraseList Name</th>
                            <th>Operation</th>
                            <th>Status</th>
                            <th>Created Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.queryplan_name }}</td>
                            <td>{{ item.hlct_name }}</td>
                            <td>{{ item.phraselist_name }}</td>
                            <td>
                                {% if item.crud == 1 %}
                                    <span class="btn btn-success btn-xs">Insert</span>
                                {% else %}
                                    <span class="btn btn-warning btn-xs">Delete</span>
                                {% endif %}
                            </td>
                            <td>
                              {% if item.status == 1 %}
                              <span class="btn btn-success btn-xs">Complete</span>
                              {% else %}
                                <span class="btn btn-danger btn-xs">Failed</span>
                              {% endif %}
                            </td>
                            <td>{% if item.created_at %}{{ moment(item.created_at).format('LLL') }}{% endif %}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
				</div>
        </div>
    </div>

    <div class="panel-footer">

    </div>
</div>
{% endblock %}
{% extends "layout.html" %}

{% block title %}Marklogic {% endblock %}

{% block page_content %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Add PhraseList</h3>
    </div>
    <div class="panel-body">
        <form method="POST" action="{{ url_for('.phraselist_crud') }}" enctype = "multipart/form-data" class="form-horizontal">
            <div class="form-group">
                <label for="nameInput" class="control-label col-sm-2">Name</label>
                <div class="col-sm-4">
                    <input id="nameInput" name="nameInput" type="input" class="form-control" placeholder="Please enter name." />
                </div>
            </div>
            <div class="form-group">
                <label for="epochNameInput" class="control-label col-sm-2">Epoch</label>
                <div class="col-sm-4">
                    <input id="epochNameInput" name="epochNameInput" type="input" class="form-control" placeholder="Please enter epoch." />
                </div>
            </div>
            <div class="form-group">
                <label for="phraseListNameInput" class="control-label col-sm-2">PhraseList Name</label>
                <div class="col-sm-4">
                    <input id="phraseListNameInput" name="phraseListNameInput" type="input" class="form-control" placeholder="Please enter phraseList name." />
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">Operation</label>
                <div class="col-sm-4">
                    <select id="crudType" name="crudType" class="col-sm-2 form-control">
                        <option selected="true" value="1">Insert</option>
                        <option value="2">Delete</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                    <label class="col-sm-2 control-label">Environment</label>
                    <div class="col-sm-4">
                        <select id="envType" name="envType" class="col-sm-2 form-control">
                            <option selected="true" value="1">Dev </option>
                            <option value="2">Cert</option>
                        </select>
                    </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2 ">Phrase File</label>
                <div class="col-sm-4">
                    <input type="file" name="file" id="file" class="form-control-file" />
                    <p class="help-block">(Please select the Excel or Csv file)</p>
                </div>                
            </div>

            <div class="form-group">
                    <label class="col-sm-2 control-label"></label>
                    <div class="col-sm-4">
                        <button type="submit" class="btn btn-primary">Upload</button>
                    </div>
            </div>
        </form>
        <div class="row">
            <div class="panel-body">
                <h3>Upload History</h3>
                 <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>PhraseList Name</th>
                            <th>Epoch</th>
                            <th>Success/Total</th>
                            <th>Operation</th>
                            <th>Status</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.phraselist_name }}</td>
                            <td>{{ item.epoch }}</td>
                            <td>
                                {{item.success}}  /  {{item.total}}
                            </td>
                            <td>
                                {% if item.crud == 1 %}
                                    <span class="btn btn-success btn-xs">Insert</span>
                                {% else %}
                                    <span class="btn btn-warning btn-xs">Delete</span>
                                {% endif %}
                            </td>
                            <td>
                              {% if item.status == 0 %}
                                <span class="btn btn-info btn-xs">Not started</span>
                              {% elif item.status == 1 %}
                                <span class="btn btn-primary btn-xs">Processing</span>
                              {% elif item.status == 2 %}
                                <span class="btn btn-success btn-xs">Complete</span>
                              {% else %}
                                <span class="btn btn-danger btn-xs">Failed</span>
                              {% endif %}
                            </td>
                            <td>{% if item.start_time %}{{ moment(item.start_time).format('LLL') }}{% endif %}</td>
                            <td>{% if item.end_time %}{{ moment(item.end_time).format('LLL') }}{% endif %}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
				</div>
        </div>
    </div>

    <div class="panel-footer">

    </div>
</div>
{% endblock %}